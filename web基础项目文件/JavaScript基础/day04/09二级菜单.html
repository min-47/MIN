<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			div.sdmenu{
				/* background-color: #006400; */
				width: 90px; 
				height: 500px;
				margin: auto;
				 
				
			}
			div.sdmenu div{
				overflow: hidden;
			}
			
			div.sdmenu div.collapsed{
				height: 25px;
			}
			
			.menuSpan{
				display: inline-block;
				 width: 90px;
				 height: 25px;
				 background-color: #333333;
				 color: white; 
				/* overflow: hidden; */
				 border-bottom: 1px solid #ddd;
			}
			.sdmenu a{
				display: block;
				width: 90px;
				height: 25px;
				margin-bottom: 1px;
				/* position: absolute; */
				background-color: rgba(88,88,88,0.5);
				color: #008000;
				text-align: left;
			}
			.sdmenu a:hover{
				color: #00FFFF;
			}
			
			
		</style>
	</head>
	<body>
		<div id="mv_menu" class="sdmenu">
			<div class="collapsed">
				<span class="menuSpan">在线工具</span>
				<a href="#">谢谢</a>
				<a href="#">谢谢</a>
				<a href="#">谢谢</a>
				<a href="#">谢谢</a>
				<a href="#">谢谢</a>
			</div>
			
			<div class="collapsed">
				<span class="menuSpan">支持我们</span>
				<a href="#">谢谢</a>
				<a href="#">谢谢</a>
				<a href="#">谢谢</a>
				<a href="#">谢谢</a> 
				 
			</div>
			
			<div class="collapsed">
				<span class="menuSpan">合作伙伴</span>
				<a href="#">谢谢</a>
				<a href="#">谢谢</a>
				 <a href="#">谢谢</a>
				 <a href="#">谢谢</a> 
				<a href="#">谢谢</a>
				<a href="#">谢谢</a> 
			</div>
			
			<div class="collapsed">
				<span class="menuSpan">捐款</span>
				<a href="#">谢谢</a>
				 <a href="#">谢谢</a>
				 <a href="#">谢谢</a> 
				 
			</div>
			
			<div class="collapsed">
				<span class="menuSpan">发送邮件</span>
				<a href="#">谢谢</a>
				<a href="#">谢谢</a>  
				<a href="#">谢谢</a>
				<a href="#">谢谢</a>  
			</div>
			
		</div>
	</body>
	<script src="js/tools.js" type="text/javascript" charset="utf-8"></script>
	 <script type="text/javascript">
	 	/**
		 *我们每一个菜单都是div
		 * 当div有collapsed这个类时，div就是折叠状态
		 * 当div没有这个类的时候 div就是展开状态
		 * 点击菜单 切换菜单的显示状态
		 */
		//获取所有class为menuSpan的元素
		var menuSpan = document.querySelectorAll(".menuSpan");
		//实现只能打开一个二级菜单的功能
		//定义一个变量，来保存当前打开的菜单
		var openDiv = menuSpan[0].parentNode;
		//为span函数绑定单击响应函数
		for(var i= 0;i<menuSpan.length;i++){
			
			menuSpan[i].onclick = function(){
				//this代表当前点击的span
				//来获取当前span的父元素
				var parentDiv = this.parentNode;
				
				//切换菜单的显示状态
				//alert("hhh");
				toggleMenu(parentDiv);
				
				
				/* addClass(openDiv,"collapsed"); */
				
				//判断opendDiv和parentDiv是否相同
				if(openDiv!=parentDiv&&!hasClass(openDiv,"collapsed")){
					//打开菜单以后，关闭之前打开的菜单
					//为了统一可以处理动画效果，我们希望在这将addClass改为toggleClass
					//此时detoggleClass不需要移除功能
					//toggleClass(openDiv,"collapsed");	
					toggleMenu(openDiv);
				}
				//修改openDiv为当前打开的菜单
				openDiv = parentDiv; 
			}
		}
		
		function toggleMenu(obj){
			//在切换类之前，获取元素的高度
			var begin = obj.offsetHeight;
			
			//切换parentDiv 的显示 这是操作样式表。优先级较低
			toggleClass(obj,"collapsed");
			
			//在切换后获取一个元素的高度
			var end = obj.offsetHeight;
			
			//console.log(end+" "+begin);
			//动画效果就是高度从begin到end的过度
			//将元素的高度重置为begin 这是内联样式，优先级较高
			obj.style.height = begin+"px";
			
			//执行动画函数
			move(obj,"height",end,10,function(){
				//动画执行完毕后,内联样式就已经没有存在的意义了，删除
				 obj.style.height = "";
				
			});
			
		}

	 </script>
</html>
